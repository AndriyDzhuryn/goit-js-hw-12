{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// ====================================== Функції для HTTP-запитів\nexport const requestForImg = async (wordSearch, page, limitImgPerPage) => {\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n\n  const option = {\n    params: {\n      key: '45515409-71b0c278136f92467ce3b8485',\n      q: `${wordSearch}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: limitImgPerPage,\n    },\n  };\n\n  return axios.get('', option);\n};\n","// ============================================= Функції для елементів інтерфейсу\nexport const createGalleryCard = imgInfo => {\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${imgInfo.webformatURL}\"\n      alt=\"${imgInfo.tags}\"\n    />\n  </a>\n  <div class=\"container-description\">\n    <div class=\"container-description-img\">\n      <h3 class=\"title-description-img\">Likes</h3>\n      <p class=\"description-img\">${imgInfo.likes}</p>\n    </div>\n    <div class=\"container-description-img\">\n      <h3 class=\"title-description-img\">Views</h3>\n      <p class=\"description-img\">${imgInfo.views}</p>\n    </div>\n    <div class=\"container-description-img\">\n      <h3 class=\"title-description-img\">Comments</h3>\n      <p class=\"description-img\">${imgInfo.comments}</p>\n    </div>\n    <div class=\"container-description-img\">\n      <h3 class=\"title-description-img\">Downloads</h3>\n      <p class=\"description-img\">${imgInfo.downloads}</p>\n    </div>\n  </div>\n</li>`;\n};\n","'use strict';\n\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport { requestForImg } from './js/pixabay-api';\nimport { createGalleryCard } from './js/render-functions';\n\nconst formSearchImg = document.querySelector('.form-search');\nconst galleryListImg = document.querySelector('.gallery');\nconst btnLoadMoreImg = document.querySelector('.gallery-item-load-more');\nconst indicatorLoader = document.querySelector('.loader');\nconst loaderContainer = document.querySelector('.loader-container');\n\nconst galleryList = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n  overlayOpacity: 1,\n});\n\nlet page;\nlet limitImgPerPage;\n\nindicatorLoader.classList.add('active');\nbtnLoadMoreImg.classList.add('active');\nloaderContainer.classList.add('active');\n\nsessionStorage.removeItem('inputWordSearch');\n\n//==============================================================SUBMIT START\nconst onFormSearchSubmit = async evt => {\n  evt.preventDefault();\n  try {\n    page = 1;\n    limitImgPerPage = 150;\n\n    const inputWordSearch = evt.target.elements.search.value.trim();\n\n    if (inputWordSearch === '') {\n      return;\n    }\n\n    sessionStorage.setItem('inputWordSearch', inputWordSearch);\n\n    indicatorLoader.classList.remove('active');\n    const { data } = await requestForImg(\n      inputWordSearch,\n      page,\n      limitImgPerPage\n    );\n    indicatorLoader.classList.add('active');\n\n    const listGalleryImg = data.hits\n      .map(imgInfo => createGalleryCard(imgInfo))\n      .join('');\n    galleryListImg.innerHTML = listGalleryImg;\n\n    galleryList.refresh();\n\n    if (data.hits.length === 0) {\n      indicatorLoader.classList.add('active');\n      btnLoadMoreImg.classList.add('active');\n      loaderContainer.classList.add('active');\n      galleryList.refresh();\n      iziToast.error(errorInputEmpty);\n      return;\n    }\n\n    btnLoadMoreImg.classList.remove('active');\n\n    const createLoaderMore = `<div class=\"loader\"></div>`;\n    loaderContainer.insertAdjacentHTML('afterbegin', createLoaderMore);\n\n    formSearchImg.reset();\n  } catch (error) {\n    console.log(error);\n  }\n};\n//==============================================================SUBMIT END\n\n// ==================================================LOAD MORE START==========\nconst onBtnSearchSubmit = async () => {\n  try {\n    const inputWordSearch = sessionStorage.getItem('inputWordSearch');\n\n    if (inputWordSearch === '') {\n      return;\n    }\n\n    page++;\n\n    loaderContainer.classList.remove('active');\n    const { data } = await requestForImg(\n      inputWordSearch,\n      page,\n      limitImgPerPage\n    );\n    loaderContainer.classList.add('active');\n\n    indicatorLoader.classList.add('active');\n    const listGalleryImg = data.hits\n      .map(imgInfo => createGalleryCard(imgInfo))\n      .join('');\n    galleryListImg.insertAdjacentHTML('beforeend', listGalleryImg);\n\n    const sizeGalleryItem = galleryListImg.children[0].getBoundingClientRect();\n    const heightGalleryItem = 2 * sizeGalleryItem.height;\n    window.scrollBy({\n      top: heightGalleryItem,\n      left: 0,\n      behavior: 'smooth',\n    });\n\n    if (galleryListImg.childElementCount < data.totalHits) {\n      const differenceResponseData =\n        data.totalHits - galleryListImg.childElementCount;\n      if (limitImgPerPage > differenceResponseData) {\n        limitImgPerPage = data.totalHits - galleryListImg.childElementCount;\n        return;\n      }\n    }\n\n    if (galleryListImg.childElementCount >= data.totalHits) {\n      btnLoadMoreImg.classList.add('active');\n      iziToast.info(infoGalleryList);\n      return;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n// ==================================================LOAD MORE END==========\n\nformSearchImg.addEventListener('submit', onFormSearchSubmit);\n\nbtnLoadMoreImg.addEventListener('click', onBtnSearchSubmit);\n\nconst errorInputEmpty = {\n  title: 'ERROR',\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  position: 'topRight',\n};\n\nconst infoGalleryList = {\n  title: 'INFO',\n  message: \"We're sorry, but you've reached the end of search results.\",\n  position: 'topRight',\n};\n"],"names":["requestForImg","wordSearch","page","limitImgPerPage","axios","option","createGalleryCard","imgInfo","formSearchImg","galleryListImg","btnLoadMoreImg","indicatorLoader","loaderContainer","galleryList","SimpleLightbox","onFormSearchSubmit","evt","inputWordSearch","data","listGalleryImg","iziToast","errorInputEmpty","error","onBtnSearchSubmit","heightGalleryItem","differenceResponseData","infoGalleryList"],"mappings":"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"}